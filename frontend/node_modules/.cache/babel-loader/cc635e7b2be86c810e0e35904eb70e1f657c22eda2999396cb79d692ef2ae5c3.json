{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{usersAPI,mentorshipAPI,jobsAPI}from'../../services/api';import LoadingSpinner from'../../components/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminDashboard=()=>{var _stats$users,_stats$users2,_stats$users3,_stats$users4,_stats$mentorship,_stats$jobs;const[stats,setStats]=useState(null);const[pendingUsers,setPendingUsers]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchDashboardData();},[]);const fetchDashboardData=async()=>{try{const[userStats,pending,mentorStats,jobStats]=await Promise.all([usersAPI.getStats(),usersAPI.getPending(),mentorshipAPI.getStats(),jobsAPI.getStats()]);setStats({users:userStats.data,mentorship:mentorStats.data,jobs:jobStats.data});setPendingUsers(pending.data);}catch(error){console.error('Error fetching dashboard data:',error);}finally{setLoading(false);}};const handleApprove=async userId=>{try{await usersAPI.approve(userId);setPendingUsers(pendingUsers.filter(u=>u.id!==userId));fetchDashboardData();}catch(error){console.error('Error approving user:',error);}};if(loading)return/*#__PURE__*/_jsx(LoadingSpinner,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Admin Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Users\"}),/*#__PURE__*/_jsx(\"p\",{className:\"stat-number\",children:(stats===null||stats===void 0?void 0:(_stats$users=stats.users)===null||_stats$users===void 0?void 0:_stats$users.total)||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Alumni\"}),/*#__PURE__*/_jsx(\"p\",{className:\"stat-number\",children:(stats===null||stats===void 0?void 0:(_stats$users2=stats.users)===null||_stats$users2===void 0?void 0:_stats$users2.alumni)||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Students\"}),/*#__PURE__*/_jsx(\"p\",{className:\"stat-number\",children:(stats===null||stats===void 0?void 0:(_stats$users3=stats.users)===null||_stats$users3===void 0?void 0:_stats$users3.students)||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card warning\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Pending Approvals\"}),/*#__PURE__*/_jsx(\"p\",{className:\"stat-number\",children:(stats===null||stats===void 0?void 0:(_stats$users4=stats.users)===null||_stats$users4===void 0?void 0:_stats$users4.pending)||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Active Mentorships\"}),/*#__PURE__*/_jsx(\"p\",{className:\"stat-number\",children:(stats===null||stats===void 0?void 0:(_stats$mentorship=stats.mentorship)===null||_stats$mentorship===void 0?void 0:_stats$mentorship.accepted)||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Active Job Posts\"}),/*#__PURE__*/_jsx(\"p\",{className:\"stat-number\",children:(stats===null||stats===void 0?void 0:(_stats$jobs=stats.jobs)===null||_stats$jobs===void 0?void 0:_stats$jobs.active)||0})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Pending Alumni Approvals\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/users\",className:\"btn btn-outline\",children:\"View All Users\"})]}),pendingUsers.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"empty-message\",children:\"No pending approvals\"}):/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Registered\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:pendingUsers.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:new Date(user.created_at).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleApprove(user.id),className:\"btn btn-success btn-sm\",children:\"Approve\"})})]},user.id))})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-actions\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/announcements\",className:\"btn btn-primary\",children:\"Create Announcement\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/users\",className:\"btn btn-secondary\",children:\"Manage Users\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/reports\",className:\"btn btn-outline\",children:\"View Reports\"})]})]})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","Link","usersAPI","mentorshipAPI","jobsAPI","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","AdminDashboard","_stats$users","_stats$users2","_stats$users3","_stats$users4","_stats$mentorship","_stats$jobs","stats","setStats","pendingUsers","setPendingUsers","loading","setLoading","fetchDashboardData","userStats","pending","mentorStats","jobStats","Promise","all","getStats","getPending","users","data","mentorship","jobs","error","console","handleApprove","userId","approve","filter","u","id","className","children","total","alumni","students","accepted","active","to","length","map","user","name","email","Date","created_at","toLocaleDateString","onClick"],"sources":["C:/Users/ACER/alumni-management-system/frontend/src/pages/admin/AdminDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { usersAPI, mentorshipAPI, jobsAPI } from '../../services/api';\r\nimport LoadingSpinner from '../../components/LoadingSpinner';\r\n\r\nconst AdminDashboard = () => {\r\n  const [stats, setStats] = useState(null);\r\n  const [pendingUsers, setPendingUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchDashboardData();\r\n  }, []);\r\n\r\n  const fetchDashboardData = async () => {\r\n    try {\r\n      const [userStats, pending, mentorStats, jobStats] = await Promise.all([\r\n        usersAPI.getStats(),\r\n        usersAPI.getPending(),\r\n        mentorshipAPI.getStats(),\r\n        jobsAPI.getStats()\r\n      ]);\r\n\r\n      setStats({\r\n        users: userStats.data,\r\n        mentorship: mentorStats.data,\r\n        jobs: jobStats.data\r\n      });\r\n      setPendingUsers(pending.data);\r\n    } catch (error) {\r\n      console.error('Error fetching dashboard data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleApprove = async (userId) => {\r\n    try {\r\n      await usersAPI.approve(userId);\r\n      setPendingUsers(pendingUsers.filter(u => u.id !== userId));\r\n      fetchDashboardData();\r\n    } catch (error) {\r\n      console.error('Error approving user:', error);\r\n    }\r\n  };\r\n\r\n  if (loading) return <LoadingSpinner />;\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      <h1>Admin Dashboard</h1>\r\n      \r\n      <div className=\"stats-grid\">\r\n        <div className=\"stat-card\">\r\n          <h3>Total Users</h3>\r\n          <p className=\"stat-number\">{stats?.users?.total || 0}</p>\r\n        </div>\r\n        <div className=\"stat-card\">\r\n          <h3>Alumni</h3>\r\n          <p className=\"stat-number\">{stats?.users?.alumni || 0}</p>\r\n        </div>\r\n        <div className=\"stat-card\">\r\n          <h3>Students</h3>\r\n          <p className=\"stat-number\">{stats?.users?.students || 0}</p>\r\n        </div>\r\n        <div className=\"stat-card warning\">\r\n          <h3>Pending Approvals</h3>\r\n          <p className=\"stat-number\">{stats?.users?.pending || 0}</p>\r\n        </div>\r\n        <div className=\"stat-card\">\r\n          <h3>Active Mentorships</h3>\r\n          <p className=\"stat-number\">{stats?.mentorship?.accepted || 0}</p>\r\n        </div>\r\n        <div className=\"stat-card\">\r\n          <h3>Active Job Posts</h3>\r\n          <p className=\"stat-number\">{stats?.jobs?.active || 0}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"dashboard-section\">\r\n        <div className=\"section-header\">\r\n          <h2>Pending Alumni Approvals</h2>\r\n          <Link to=\"/admin/users\" className=\"btn btn-outline\">View All Users</Link>\r\n        </div>\r\n        \r\n        {pendingUsers.length === 0 ? (\r\n          <p className=\"empty-message\">No pending approvals</p>\r\n        ) : (\r\n          <div className=\"table-container\">\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  <th>Name</th>\r\n                  <th>Email</th>\r\n                  <th>Registered</th>\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {pendingUsers.map(user => (\r\n                  <tr key={user.id}>\r\n                    <td>{user.name}</td>\r\n                    <td>{user.email}</td>\r\n                    <td>{new Date(user.created_at).toLocaleDateString()}</td>\r\n                    <td>\r\n                      <button \r\n                        onClick={() => handleApprove(user.id)}\r\n                        className=\"btn btn-success btn-sm\"\r\n                      >\r\n                        Approve\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"quick-actions\">\r\n        <h2>Quick Actions</h2>\r\n        <div className=\"action-buttons\">\r\n          <Link to=\"/admin/announcements\" className=\"btn btn-primary\">\r\n            Create Announcement\r\n          </Link>\r\n          <Link to=\"/admin/users\" className=\"btn btn-secondary\">\r\n            Manage Users\r\n          </Link>\r\n          <Link to=\"/admin/reports\" className=\"btn btn-outline\">\r\n            View Reports\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,QAAQ,CAAEC,aAAa,CAAEC,OAAO,KAAQ,oBAAoB,CACrE,MAAO,CAAAC,cAAc,KAAM,iCAAiC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7D,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,KAAAC,YAAA,CAAAC,aAAA,CAAAC,aAAA,CAAAC,aAAA,CAAAC,iBAAA,CAAAC,WAAA,CAC3B,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACoB,YAAY,CAAEC,eAAe,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACsB,OAAO,CAAEC,UAAU,CAAC,CAAGvB,QAAQ,CAAC,IAAI,CAAC,CAE5CC,SAAS,CAAC,IAAM,CACduB,kBAAkB,CAAC,CAAC,CACtB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAI,CACF,KAAM,CAACC,SAAS,CAAEC,OAAO,CAAEC,WAAW,CAAEC,QAAQ,CAAC,CAAG,KAAM,CAAAC,OAAO,CAACC,GAAG,CAAC,CACpE3B,QAAQ,CAAC4B,QAAQ,CAAC,CAAC,CACnB5B,QAAQ,CAAC6B,UAAU,CAAC,CAAC,CACrB5B,aAAa,CAAC2B,QAAQ,CAAC,CAAC,CACxB1B,OAAO,CAAC0B,QAAQ,CAAC,CAAC,CACnB,CAAC,CAEFZ,QAAQ,CAAC,CACPc,KAAK,CAAER,SAAS,CAACS,IAAI,CACrBC,UAAU,CAAER,WAAW,CAACO,IAAI,CAC5BE,IAAI,CAAER,QAAQ,CAACM,IACjB,CAAC,CAAC,CACFb,eAAe,CAACK,OAAO,CAACQ,IAAI,CAAC,CAC/B,CAAE,MAAOG,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACxD,CAAC,OAAS,CACRd,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAgB,aAAa,CAAG,KAAO,CAAAC,MAAM,EAAK,CACtC,GAAI,CACF,KAAM,CAAArC,QAAQ,CAACsC,OAAO,CAACD,MAAM,CAAC,CAC9BnB,eAAe,CAACD,YAAY,CAACsB,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACC,EAAE,GAAKJ,MAAM,CAAC,CAAC,CAC1DhB,kBAAkB,CAAC,CAAC,CACtB,CAAE,MAAOa,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC/C,CACF,CAAC,CAED,GAAIf,OAAO,CAAE,mBAAOd,IAAA,CAACF,cAAc,GAAE,CAAC,CAEtC,mBACEI,KAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtC,IAAA,OAAAsC,QAAA,CAAI,iBAAe,CAAI,CAAC,cAExBpC,KAAA,QAAKmC,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBpC,KAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtC,IAAA,OAAAsC,QAAA,CAAI,aAAW,CAAI,CAAC,cACpBtC,IAAA,MAAGqC,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAE,CAAA5B,KAAK,SAALA,KAAK,kBAAAN,YAAA,CAALM,KAAK,CAAEe,KAAK,UAAArB,YAAA,iBAAZA,YAAA,CAAcmC,KAAK,GAAI,CAAC,CAAI,CAAC,EACtD,CAAC,cACNrC,KAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtC,IAAA,OAAAsC,QAAA,CAAI,QAAM,CAAI,CAAC,cACftC,IAAA,MAAGqC,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAE,CAAA5B,KAAK,SAALA,KAAK,kBAAAL,aAAA,CAALK,KAAK,CAAEe,KAAK,UAAApB,aAAA,iBAAZA,aAAA,CAAcmC,MAAM,GAAI,CAAC,CAAI,CAAC,EACvD,CAAC,cACNtC,KAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtC,IAAA,OAAAsC,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBtC,IAAA,MAAGqC,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAE,CAAA5B,KAAK,SAALA,KAAK,kBAAAJ,aAAA,CAALI,KAAK,CAAEe,KAAK,UAAAnB,aAAA,iBAAZA,aAAA,CAAcmC,QAAQ,GAAI,CAAC,CAAI,CAAC,EACzD,CAAC,cACNvC,KAAA,QAAKmC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCtC,IAAA,OAAAsC,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAC1BtC,IAAA,MAAGqC,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAE,CAAA5B,KAAK,SAALA,KAAK,kBAAAH,aAAA,CAALG,KAAK,CAAEe,KAAK,UAAAlB,aAAA,iBAAZA,aAAA,CAAcW,OAAO,GAAI,CAAC,CAAI,CAAC,EACxD,CAAC,cACNhB,KAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtC,IAAA,OAAAsC,QAAA,CAAI,oBAAkB,CAAI,CAAC,cAC3BtC,IAAA,MAAGqC,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAE,CAAA5B,KAAK,SAALA,KAAK,kBAAAF,iBAAA,CAALE,KAAK,CAAEiB,UAAU,UAAAnB,iBAAA,iBAAjBA,iBAAA,CAAmBkC,QAAQ,GAAI,CAAC,CAAI,CAAC,EAC9D,CAAC,cACNxC,KAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtC,IAAA,OAAAsC,QAAA,CAAI,kBAAgB,CAAI,CAAC,cACzBtC,IAAA,MAAGqC,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAE,CAAA5B,KAAK,SAALA,KAAK,kBAAAD,WAAA,CAALC,KAAK,CAAEkB,IAAI,UAAAnB,WAAA,iBAAXA,WAAA,CAAakC,MAAM,GAAI,CAAC,CAAI,CAAC,EACtD,CAAC,EACH,CAAC,cAENzC,KAAA,QAAKmC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCpC,KAAA,QAAKmC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BtC,IAAA,OAAAsC,QAAA,CAAI,0BAAwB,CAAI,CAAC,cACjCtC,IAAA,CAACN,IAAI,EAACkD,EAAE,CAAC,cAAc,CAACP,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,gBAAc,CAAM,CAAC,EACtE,CAAC,CAEL1B,YAAY,CAACiC,MAAM,GAAK,CAAC,cACxB7C,IAAA,MAAGqC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,sBAAoB,CAAG,CAAC,cAErDtC,IAAA,QAAKqC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC9BpC,KAAA,UAAAoC,QAAA,eACEtC,IAAA,UAAAsC,QAAA,cACEpC,KAAA,OAAAoC,QAAA,eACEtC,IAAA,OAAAsC,QAAA,CAAI,MAAI,CAAI,CAAC,cACbtC,IAAA,OAAAsC,QAAA,CAAI,OAAK,CAAI,CAAC,cACdtC,IAAA,OAAAsC,QAAA,CAAI,YAAU,CAAI,CAAC,cACnBtC,IAAA,OAAAsC,QAAA,CAAI,QAAM,CAAI,CAAC,EACb,CAAC,CACA,CAAC,cACRtC,IAAA,UAAAsC,QAAA,CACG1B,YAAY,CAACkC,GAAG,CAACC,IAAI,eACpB7C,KAAA,OAAAoC,QAAA,eACEtC,IAAA,OAAAsC,QAAA,CAAKS,IAAI,CAACC,IAAI,CAAK,CAAC,cACpBhD,IAAA,OAAAsC,QAAA,CAAKS,IAAI,CAACE,KAAK,CAAK,CAAC,cACrBjD,IAAA,OAAAsC,QAAA,CAAK,GAAI,CAAAY,IAAI,CAACH,IAAI,CAACI,UAAU,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAAK,CAAC,cACzDpD,IAAA,OAAAsC,QAAA,cACEtC,IAAA,WACEqD,OAAO,CAAEA,CAAA,GAAMtB,aAAa,CAACgB,IAAI,CAACX,EAAE,CAAE,CACtCC,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CACnC,SAED,CAAQ,CAAC,CACP,CAAC,GAXES,IAAI,CAACX,EAYV,CACL,CAAC,CACG,CAAC,EACH,CAAC,CACL,CACN,EACE,CAAC,cAENlC,KAAA,QAAKmC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BtC,IAAA,OAAAsC,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBpC,KAAA,QAAKmC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BtC,IAAA,CAACN,IAAI,EAACkD,EAAE,CAAC,sBAAsB,CAACP,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,qBAE5D,CAAM,CAAC,cACPtC,IAAA,CAACN,IAAI,EAACkD,EAAE,CAAC,cAAc,CAACP,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,cAEtD,CAAM,CAAC,cACPtC,IAAA,CAACN,IAAI,EAACkD,EAAE,CAAC,gBAAgB,CAACP,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,cAEtD,CAAM,CAAC,EACJ,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAnC,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}